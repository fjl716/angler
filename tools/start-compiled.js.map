{"version":3,"sources":["start.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA;;;;;wEAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACQ,mCADR;;AAAA;AAAA;AAAA,mBAEQ,mBAAI,eAAK,IAAL,CAAU,SAAV,EAAqB,EAAE,OAAO,IAAT,EAArB,CAAJ,CAFR;;AAAA;AAAA;AAAA,mBAGQ,sBAAY,mBAAW;AAC3B;AACA;AACA,gCAAc,MAAd,CAAqB;AAAA,uBAAK,EAAE,MAAF,KAAa,MAAlB;AAAA,eAArB,EAA+C,OAA/C,CAAuD,kBAAU;AAC/D,oBAAI,MAAM,OAAN,CAAc,OAAO,KAArB,CAAJ,EAAiC;AAC/B,yBAAO,KAAP,CAAa,OAAb,CAAqB,+BAArB;AACD,iBAFD,MAEO;AACL;AACA,yBAAO,KAAP,GAAe,CAAC,+BAAD,EAAkC,OAAO,KAAzC,CAAf;AACA;AACD;;AAED,uBAAO,OAAP,CAAe,IAAf,CAAoB,IAAI,kBAAQ,0BAAZ,EAApB;AACA,uBAAO,OAAP,CAAe,IAAf,CAAoB,IAAI,kBAAQ,cAAZ,EAApB;AACA,uBACG,MADH,CAEG,OAFH,CAGG,MAHH,CAGU;AAAA,yBAAK,EAAE,MAAF,KAAa,cAAlB;AAAA,iBAHV,EAIG,OAJH,CAIW;AAAA,yBAAM,EAAE,KAAF,GAAU,EAAE;AACzB;AACA;AACA,6BAAS,CACP,CAAC,iBAAD,EAAoB;AAClB,kCAAY,CACV;AACE,mCAAW,qBADb;AAEE,iCAAS,CAAC,OAAD,CAFX;AAGE,gCAAQ,CAAC,QAAD;AAHV,uBADU,EAKP;AACD,mCAAW,8BADV;AAED,iCAAS,CAAC,OAAD,EAAU,cAAV;AAFR,uBALO;AADM,qBAApB,CADO;AAHc,mBAAhB;AAAA,iBAJX;AAuBD,eAlCD;;AAoCA,kBAAM,UAAU,yCAAhB;AACA,kBAAM,eAAe,iCAAkB,OAAlB,EAA2B;;AAE9C;AACA;AACA,4BAAY,kBAAc,CAAd,EAAiB,MAAjB,CAAwB,UAJU;;AAM9C;AACA,uBAAO,kBAAc,CAAd,EAAiB;;AAPsB,eAA3B,CAArB;AAYA,kBAAM,iBAAiB,QACpB,SADoB,CAEpB,MAFoB,CAEb;AAAA,uBAAY,SAAS,OAAT,CAAiB,MAAjB,KAA4B,MAAxC;AAAA,eAFa,EAGpB,GAHoB,CAGhB;AAAA,uBAAY,oCAAqB,QAArB,CAAZ;AAAA,eAHgB,CAAvB;;AAKA,kBAAI,8BAA6B,sCAAM;AACrC,yCAAU,UAAC,GAAD,EAAM,IAAN,EAAe;AACvB,sBAAI,CAAC,GAAL,EAAU;AACR,wBAAM,KAAK,sBAAY,MAAZ,EAAX;AACA,uBAAG,IAAH,4BACM,QAAQ,EAAR,GAAa,EAAE,QAAQ,KAAV,EAAiB,IAAI,KAArB,EADnB;;AAGE,6BAAO;AACL,gCAAQ,IADH;AAEL,qCAAa,YAAb,0CAA8B,cAA9B;AAFK,uBAHT;;AAQE;AACA;AACA,6BAAO,CAAC,sBAAD;AAVT,wBAWG,OAXH;AAYA;AACD;AACF,iBAjBD;AAkBD,eAnBD;;AAqBA,sBAAQ,MAAR,CAAe,MAAf,EAAuB;AAAA,uBAAM,6BAAN;AAAA,eAAvB;AACD,aA/EK,CAHR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAe,K;;;;;AAhBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAM,QAAQ,CAAC,QAAQ,IAAR,CAAa,QAAb,CAAsB,WAAtB,CAAf,C,CAnBA;;;;;;;;;kBA8Ge,K","file":"start-compiled.js","sourcesContent":["/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright Â© 2014-2016 Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport Browsersync from 'browser-sync';\nimport webpack from 'webpack';\nimport webpackMiddleware from 'webpack-middleware';\nimport webpackHotMiddleware from 'webpack-hot-middleware';\nimport run from './run';\nimport runServer from './runServer';\nimport webpackConfig from './webpack.config';\nimport clean from './clean';\nimport copy from './copy';\n\nconst DEBUG = !process.argv.includes('--release');\n\n/**\n * Launches a development web server with \"live reload\" functionality -\n * synchronizing URLs, interactions and code changes across multiple devices.\n */\nasync function start() {\n  await run(clean);\n  await run(copy.bind(undefined, { watch: true }));\n  await new Promise(resolve => {\n    // Patch the client-side bundle configurations\n    // to enable Hot Module Replacement (HMR) and React Transform\n    webpackConfig.filter(x => x.target !== 'node').forEach(config => {\n      if (Array.isArray(config.entry)) {\n        config.entry.unshift('webpack-hot-middleware/client');\n      } else {\n        /* eslint-disable no-param-reassign */\n        config.entry = ['webpack-hot-middleware/client', config.entry];\n        /* eslint-enable no-param-reassign */\n      }\n\n      config.plugins.push(new webpack.HotModuleReplacementPlugin());\n      config.plugins.push(new webpack.NoErrorsPlugin());\n      config\n        .module\n        .loaders\n        .filter(x => x.loader === 'babel-loader')\n        .forEach(x => (x.query = { // eslint-disable-line no-param-reassign\n          // Wraps all React components into arbitrary transforms\n          // https://github.com/gaearon/babel-plugin-react-transform\n          plugins: [\n            ['react-transform', {\n              transforms: [\n                {\n                  transform: 'react-transform-hmr',\n                  imports: ['react'],\n                  locals: ['module'],\n                }, {\n                  transform: 'react-transform-catch-errors',\n                  imports: ['react', 'redbox-react'],\n                },\n              ],\n            },\n            ],\n          ],\n        }));\n    });\n\n    const bundler = webpack(webpackConfig);\n    const wpMiddleware = webpackMiddleware(bundler, {\n\n      // IMPORTANT: webpack middleware can't access config,\n      // so we should provide publicPath by ourselves\n      publicPath: webpackConfig[0].output.publicPath,\n\n      // Pretty colored output\n      stats: webpackConfig[0].stats,\n\n      // For other settings see\n      // https://webpack.github.io/docs/webpack-dev-middleware\n    });\n    const hotMiddlewares = bundler\n      .compilers\n      .filter(compiler => compiler.options.target !== 'node')\n      .map(compiler => webpackHotMiddleware(compiler));\n\n    let handleServerBundleComplete = () => {\n      runServer((err, host) => {\n        if (!err) {\n          const bs = Browsersync.create();\n          bs.init({\n            ...(DEBUG ? {} : { notify: false, ui: false }),\n\n            proxy: {\n              target: host,\n              middleware: [wpMiddleware, ...hotMiddlewares],\n            },\n\n            // no need to watch '*.js' here, webpack will take care of it for us,\n            // including full page reloads if HMR won't work\n            files: ['build/content/**/*.*'],\n          }, resolve);\n          handleServerBundleComplete = runServer;\n        }\n      });\n    };\n\n    bundler.plugin('done', () => handleServerBundleComplete());\n  });\n}\n\nexport default start;\n"]}